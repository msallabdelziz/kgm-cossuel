{% extends 'base_modal.html.twig' %}

{% block title %}Administration{% endblock %}
{% block body %}
    <style>

#tm ul, #tm li{
  list-style: none;
  padding: 0;
}

#tm .container{
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 1rem;
}
#tm .wrapper{
}
#tm h1{
  font-size: 1.1rem;
}
#tm .sessions{
  position: relative;
  width:400px;
}
#tm li{
  padding-top:0px;
  padding-bottom: 1.5rem;
  border-left: 1px solid black;
  position: relative;
  padding-left: 25px;
  margin-left: 10px;
}
  #tm li:last-child{
    {# border: 0px;
    padding-bottom: 0; #}
  }
  #tm li:before{
    content: '';
    width: 20px;
    height: 20px;
    background: black;
    border: 2px solid orange;
    border-radius: 50%;
    position: absolute;
    left: -10px;
    top: 0px;
  }

#tm .time{
  color: #2a2839;
  font-weight: 500;
  font-size:14px;
  @include mobile-and-up{
    font-size: .9rem;
  }
  @include mobile-only{
    margin-bottom: .3rem;
    font-size: 0.85rem;
  }

}
#tm p{
  color: #4f4f4f;
  font-size:12px;
  margin-top:1px;
  margin-left:4px;
  @include mobile-only{
    font-size: .9rem;
  }
}
    </style>
    {% set action_demande = "Validation" %}
    {% if demande is not defined and dossier is defined %}
        {% set demande = dossier.demande %}
    {% endif %}
    {% set installation = demande.installation %}
    
    <section class="container">
         <div class="row">

            <div class="mb-2">
                <div class="p-1" id="tm">
                    <h2 class="fs-title">Historique Demande
                        <a data-bs-dismiss="modal" class="float-end next action-button btn btn-sm btn-secondary ">Fermer</a>
                    </h2>
                    <hr />
                    {# TIMELINE #}

                    <div class="container">
                        <div class="wrapper">
                            <ul class="sessions" align="left">
                                <li>
                                    <div class="time">{{ installation.createdAt | date('d-m-Y à H:i:s') }}
                                    </div>
                                    <p class="fw-light fs-7">
                                        <svg class="bi" width="24" height="24" fill="black">
                                            <use xlink:href="{{ asset('assets/img/bootstrap-icons.svg#check2') }}"></use>
                                        </svg>
                                        Création de la demande</p>
                                </li>
                                <li>
                                    <div class="time">{{ demande.dateCreation | date('d-m-Y à H:i:s') }}</div>
                                    <p class="fw-light fs-7">
                                        <svg class="bi" width="24" height="24" fill="black">
                                            <use xlink:href="{{ asset('assets/img/bootstrap-icons.svg#check2') }}"></use>
                                        </svg>
                                        Soumission de la demande</p>
                                </li>
                                {% if paiement is defined %}
                                {% if paiement.dateSaisie %}
                                <li>
                                    <div class="time">{{ paiement.dateSaisie | date('d-m-Y à H:i:s') }}</div>
                                    <p class="fw-light fs-7">
                                        <svg class="bi" width="24" height="24" fill="black">
                                            <use xlink:href="{{ asset('assets/img/bootstrap-icons.svg#check2') }}"></use>
                                        </svg>
                                        Enregistrement du Paiement de la demande</p>
                                </li>
                                {% endif %}
                                {% if paiement.datePaiement %}
                                <li>
                                    <div class="time">{{ paiement.datePaiement | date('d-m-Y à H:i:s') }}</div>
                                    <p class="fw-light fs-7">
                                        <svg class="bi" width="24" height="24" fill="black">
                                            <use xlink:href="{{ asset('assets/img/bootstrap-icons.svg#check2') }}"></use>
                                        </svg>
                                        Validation du Paiement de la demande</p>
                                </li>
                                {% endif %}
                                {% endif %}
                                {% if dossier is defined %}
                                <li>
                                    <div class="time">{{ dossier.dateCreation | date('d-m-Y à H:i:s') }}</div>
                                    <p class="fw-light fs-7">
                                        <svg class="bi" width="24" height="24" fill="black">
                                            <use xlink:href="{{ asset('assets/img/bootstrap-icons.svg#check2') }}"></use>
                                        </svg>
                                        Création du dossier et affectation</p>
                                </li>
                                {% if dossier.visiteCourante %}
                                <li>
                                    <div class="time">{{ dossier.visiteCourante.datePlanifie | date('d-m-Y à H:i:s') }}</div>
                                    <p class="fw-light fs-7">
                                        <svg class="bi" width="24" height="24" fill="black">
                                            <use xlink:href="{{ asset('assets/img/bootstrap-icons.svg#check2') }}"></use>
                                        </svg>
                                        Planification inspection installation</p>
                                </li>
                                {% if dossier.visiteCourante.dateRealise %}
                                <li>
                                    <div class="time">{{ dossier.visiteCourante.dateRealise | date('d-m-Y à H:i:s') }}</div>
                                    <p class="fw-light fs-7">
                                        <svg class="bi" width="24" height="24" fill="black">
                                            <use xlink:href="{{ asset('assets/img/bootstrap-icons.svg#check2') }}"></use>
                                        </svg>
                                        Réalisation de l'inspection de l'installation</p>
                                </li>
                                {% endif %}
                                {% if dossier.visiteCourante.dateRapporte %}
                                <li>
                                    <div class="time">{{ dossier.visiteCourante.dateRapporte | date('d-m-Y à H:i:s') }}</div>
                                    <p class="fw-light fs-7">
                                        <svg class="bi" width="24" height="24" fill="black">
                                            <use xlink:href="{{ asset('assets/img/bootstrap-icons.svg#check2') }}"></use>
                                        </svg>
                                        Elaboration du rapport de l'inspection</p>
                                </li>
                                {% endif %}
                                {% if dossier.visiteCourante.dateAtteste %}
                                <li>
                                    <div class="time">{{ dossier.visiteCourante.dateAtteste | date('d-m-Y à H:i:s') }}</div>
                                    <p class="fw-light fs-7">
                                        <svg class="bi" width="24" height="24" fill="black">
                                            <use xlink:href="{{ asset('assets/img/bootstrap-icons.svg#check2') }}"></use>
                                        </svg>
                                        Attestation des résultats de l'inspection</p>
                                </li>
                                {% endif %}
                                {% endif %}
                                {% endif %}
                            </ul>
                        </div>
                    </div>                     

                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block javascripts %}
<script>
    $(document).ready(function() {
            
    });
</script>
{% endblock %}
